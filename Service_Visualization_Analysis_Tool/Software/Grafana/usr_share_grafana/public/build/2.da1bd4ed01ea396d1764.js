webpackJsonp([2],{795:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a(851),a(852),a(853)},799:function(t,e,a){"use strict";function i(t){var e=new u.b({type:t.type,defaultParams:[]});return new u.a(t,e)}function n(t){switch(t){case"ok":return{text:"OK",iconClass:"icon-gf icon-gf-online",stateClass:"alert-state-ok"};case"alerting":return{text:"ALERTING",iconClass:"icon-gf icon-gf-critical",stateClass:"alert-state-critical"};case"no_data":return{text:"NO DATA",iconClass:"fa fa-question",stateClass:"alert-state-warning"};case"paused":return{text:"PAUSED",iconClass:"fa fa-pause",stateClass:"alert-state-paused"};case"pending":return{text:"PENDING",iconClass:"fa fa-exclamation",stateClass:"alert-state-warning"}}throw{message:"Unknown alert state"}}function r(t,e){return l.a.reduce(t,function(t,e){return void 0!==e.metric&&void 0!==e.value&&t.push(e.metric+"="+e.value),void 0!==e.Metric&&void 0!==e.Value&&t.push(e.Metric+"="+e.Value),t},[]).join(e)}function o(t){return l.a.isArray(t.data)?r(t.data,", "):l.a.isArray(t.data.evalMatches)?r(t.data.evalMatches,", "):t.data.error?"Error: "+t.data.error:t.data.noData||t.data.no_data?"No Data":""}var s=a(4),l=a.n(s),u=a(800),c=new u.b({type:"query",params:[{name:"queryRefId",type:"string",dynamicLookup:!0},{name:"from",type:"string",options:["1s","10s","1m","5m","10m","15m","1h","24h","48h"]},{name:"to",type:"string",options:["now"]}],defaultParams:["#A","15m","now","avg"]}),d=[{text:"Query",value:"query"}],p={alerting:1,no_data:2,pending:3,ok:4,paused:5},f=[{text:"IS ABOVE",value:"gt"},{text:"IS BELOW",value:"lt"},{text:"IS OUTSIDE RANGE",value:"outside_range"},{text:"IS WITHIN RANGE",value:"within_range"},{text:"HAS NO VALUE",value:"no_value"}],h=[{text:"OR",value:"or"},{text:"AND",value:"and"}],v=[{text:"avg()",value:"avg"},{text:"min()",value:"min"},{text:"max()",value:"max"},{text:"sum()",value:"sum"},{text:"count()",value:"count"},{text:"last()",value:"last"},{text:"median()",value:"median"},{text:"diff()",value:"diff"},{text:"percent_diff()",value:"percent_diff"},{text:"count_non_null()",value:"count_non_null"}],m=[{text:"Alerting",value:"alerting"},{text:"No Data",value:"no_data"},{text:"Keep Last State",value:"keep_state"},{text:"Ok",value:"ok"}],g=[{text:"Alerting",value:"alerting"},{text:"Keep Last State",value:"keep_state"}];e.a={alertQueryDef:c,getStateDisplayModel:n,conditionTypes:d,evalFunctions:f,evalOperators:h,noDataModes:m,executionErrorModes:g,reducerTypes:v,createReducerPart:i,getAlertAnnotationInfo:o,alertStateSortScore:p}},800:function(t,e,a){"use strict";function i(t,e){var a=t.def.type+"(",i=o.a.map(t.params,function(e,a){var i=t.def.params[a];return"time"===i.type&&"auto"===e&&(e="$__interval"),"single"===i.quote?"'"+e+"'":"double"===i.quote?'"'+e+'"':e});return e&&i.unshift(e),a+i.join(", ")+")"}function n(t,e){return e+" "+t.params[0]}a.d(e,"b",function(){return s}),a.d(e,"a",function(){return l}),e.c=i,e.d=n;var r=a(4),o=a.n(r),s=function(){function t(t){this.type=t.type,this.params=t.params,this.defaultParams=t.defaultParams,this.renderer=t.renderer,this.category=t.category,this.addStrategy=t.addStrategy}return t}(),l=function(){function t(t,e){if(this.part=t,this.def=e,!this.def)throw{message:"Could not find query part "+t.type};t.params=t.params||o.a.clone(this.def.defaultParams),this.params=t.params,this.updateText()}return t.prototype.render=function(t){return this.def.renderer(this,t)},t.prototype.hasMultipleParamsInString=function(t,e){return-1!==t.indexOf(",")&&(this.def.params[e+1]&&this.def.params[e+1].optional)},t.prototype.updateParam=function(t,e){var a=this;if(this.hasMultipleParamsInString(t,e))return void o.a.each(t.split(","),function(t,e){a.updateParam(t.trim(),e)});""===t&&this.def.params[e].optional?this.params.splice(e,1):this.params[e]=t,this.part.params=this.params,this.updateText()},t.prototype.updateText=function(){if(0===this.params.length)return void(this.text=this.def.type+"()");var t=this.def.type+"(";t+=this.params.join(", "),t+=")",this.text=t},t}()},851:function(t,e,a){"use strict";var i=a(4),n=a.n(i),r=a(1),o=a.n(r),s=a(290),l=a(799),u=function(){function t(t,e,a){this.backendSrv=t,this.$location=e,this.stateFilters=[{text:"All",value:null},{text:"OK",value:"ok"},{text:"Alerting",value:"alerting"},{text:"No Data",value:"no_data"},{text:"Paused",value:"paused"}],this.filters={state:"ALL"},this.navModel=a.getAlertingNav(0);var i=e.search();this.filters.state=i.state||null,this.loadAlerts()}return t.$inject=["backendSrv","$location","navModelSrv"],t.prototype.filtersChanged=function(){this.$location.search(this.filters)},t.prototype.loadAlerts=function(){var t=this;this.backendSrv.get("/api/alerts",this.filters).then(function(e){t.alerts=n.a.map(e,function(t){return t.stateModel=l.a.getStateDisplayModel(t.state),t.newStateDateAgo=o()(t.newStateDate).fromNow().replace(" ago",""),t.evalData&&t.evalData.no_data&&(t.no_data=!0),t})})},t.prototype.pauseAlertRule=function(t){var e=n.a.find(this.alerts,{id:t}),a={paused:"paused"!==e.state};this.backendSrv.post("/api/alerts/"+e.id+"/pause",a).then(function(t){e.state=t.state,e.stateModel=l.a.getStateDisplayModel(t.state)})},t.prototype.openHowTo=function(){s.appEvents.emit("show-modal",{src:"public/app/features/alerting/partials/alert_howto.html",modalClass:"confirm-modal",model:{}})},t}();s.coreModule.controller("AlertListCtrl",u)},852:function(t,e,a){"use strict";var i=a(290),n=function(){function t(t,e){this.backendSrv=t,this.loadNotifications(),this.navModel=e.getAlertingNav(1)}return t.$inject=["backendSrv","navModelSrv"],t.prototype.loadNotifications=function(){var t=this;this.backendSrv.get("/api/alert-notifications").then(function(e){t.notifications=e})},t.prototype.deleteNotification=function(t){var e=this;this.backendSrv.delete("/api/alert-notifications/"+t).then(function(){e.notifications=e.notifications.filter(function(e){return e.id!==t})})},t}();i.coreModule.controller("AlertNotificationsListCtrl",n)},853:function(t,e,a){"use strict";var i=a(4),n=a.n(i),r=a(290),o=function(){function t(t,e,a,i,r){var o=this;this.$routeParams=t,this.backendSrv=e,this.$location=a,this.$templateCache=i,this.testSeverity="critical",this.defaults={type:"email",settings:{httpMethod:"POST",autoResolve:!0,uploadImage:!0},isDefault:!1},this.navModel=r.getAlertingNav(),this.backendSrv.get("/api/alert-notifiers").then(function(t){o.notifiers=t;for(var e=0,a=o.notifiers;e<a.length;e++){var i=a[e];o.$templateCache.put(o.getNotifierTemplateId(i.type),i.optionsTemplate)}return o.$routeParams.id?o.backendSrv.get("/api/alert-notifications/"+o.$routeParams.id).then(function(t){return t}):n.a.defaults(o.model,o.defaults)}).then(function(t){o.model=t,o.notifierTemplateId=o.getNotifierTemplateId(o.model.type)})}return t.$inject=["$routeParams","backendSrv","$location","$templateCache","navModelSrv"],t.prototype.save=function(){var t=this;this.theForm.$valid&&(this.model.id?this.backendSrv.put("/api/alert-notifications/"+this.model.id,this.model).then(function(e){t.model=e,r.appEvents.emit("alert-success",["Notification updated",""])}):this.backendSrv.post("/api/alert-notifications",this.model).then(function(e){r.appEvents.emit("alert-success",["Notification created",""]),t.$location.path("alerting/notifications")}))},t.prototype.getNotifierTemplateId=function(t){return"notifier-options-"+t},t.prototype.typeChanged=function(){this.model.settings={},this.notifierTemplateId=this.getNotifierTemplateId(this.model.type)},t.prototype.testNotification=function(){if(this.theForm.$valid){var t={name:this.model.name,type:this.model.type,settings:this.model.settings};this.backendSrv.post("/api/alert-notifications/test",t).then(function(t){r.appEvents.emit("alert-success",["Test notification sent",""])})}},t}();r.coreModule.controller("AlertNotificationEditCtrl",o)}});
//# sourceMappingURL=2.da1bd4ed01ea396d1764.js.map