{"version":3,"sources":["webpack:///2.da1bd4ed01ea396d1764.js","webpack:///./public/app/features/alerting/alert_def.ts","webpack:///./public/app/core/components/query_part/query_part.ts","webpack:///./public/app/features/alerting/alert_list_ctrl.ts","webpack:///./public/app/features/alerting/notifications_list_ctrl.ts","webpack:///./public/app/features/alerting/notification_edit_ctrl.ts"],"names":["webpackJsonp","795","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","799","createReducerPart","model","def","__WEBPACK_IMPORTED_MODULE_1_app_core_components_query_part_query_part__","type","defaultParams","getStateDisplayModel","state","text","iconClass","stateClass","message","joinEvalMatches","matches","separator","__WEBPACK_IMPORTED_MODULE_0_lodash___default","a","reduce","res","ev","undefined","metric","push","Metric","Value","join","getAlertAnnotationInfo","ah","isArray","data","evalMatches","error","noData","no_data","__WEBPACK_IMPORTED_MODULE_0_lodash__","n","alertQueryDef","params","name","dynamicLookup","options","conditionTypes","alertStateSortScore","alerting","pending","ok","paused","evalFunctions","evalOperators","reducerTypes","noDataModes","executionErrorModes","800","functionRenderer","part","innerExpr","str","parameters","map","index","paramType","quote","unshift","suffixRenderer","d","QueryPartDef","QueryPart","this","renderer","category","addStrategy","clone","updateText","prototype","render","hasMultipleParamsInString","strValue","indexOf","optional","updateParam","_this","each","split","partVal","idx","trim","splice","length","851","__WEBPACK_IMPORTED_MODULE_1_moment__","__WEBPACK_IMPORTED_MODULE_1_moment___default","__WEBPACK_IMPORTED_MODULE_2_app_core_core__","__WEBPACK_IMPORTED_MODULE_3__alert_def__","AlertListCtrl","backendSrv","$location","navModelSrv","stateFilters","filters","navModel","getAlertingNav","search","loadAlerts","$inject","filtersChanged","get","then","result","alerts","alert","stateModel","newStateDateAgo","newStateDate","fromNow","replace","evalData","pauseAlertRule","alertId","find","id","payload","post","openHowTo","emit","src","modalClass","controller","852","__WEBPACK_IMPORTED_MODULE_0_app_core_core__","AlertNotificationsListCtrl","loadNotifications","notifications","deleteNotification","delete","filter","notification","853","__WEBPACK_IMPORTED_MODULE_1_app_core_core__","AlertNotificationEditCtrl","$routeParams","$templateCache","testSeverity","defaults","settings","httpMethod","autoResolve","uploadImage","isDefault","notifiers","_i","_a","notifier","put","getNotifierTemplateId","optionsTemplate","notifierTemplateId","save","theForm","$valid","path","typeChanged","testNotification"],"mappings":"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","file":"2.da1bd4ed01ea396d1764.js","sourcesContent":["webpackJsonp([2],{\n\n/***/ 795:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__alert_list_ctrl__ = __webpack_require__(851);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__notifications_list_ctrl__ = __webpack_require__(852);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__notification_edit_ctrl__ = __webpack_require__(853);\n\r\n\r\n\r\n\n\n/***/ }),\n\n/***/ 799:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_app_core_components_query_part_query_part__ = __webpack_require__(800);\n///<reference path=\"../../headers/common.d.ts\" />\r\n\r\n\r\nvar alertQueryDef = new __WEBPACK_IMPORTED_MODULE_1_app_core_components_query_part_query_part__[\"b\" /* QueryPartDef */]({\r\n    type: 'query',\r\n    params: [\r\n        { name: \"queryRefId\", type: 'string', dynamicLookup: true },\r\n        { name: \"from\", type: \"string\", options: ['1s', '10s', '1m', '5m', '10m', '15m', '1h', '24h', '48h'] },\r\n        { name: \"to\", type: \"string\", options: ['now'] },\r\n    ],\r\n    defaultParams: ['#A', '15m', 'now', 'avg']\r\n});\r\nvar conditionTypes = [\r\n    { text: 'Query', value: 'query' },\r\n];\r\nvar alertStateSortScore = {\r\n    alerting: 1,\r\n    no_data: 2,\r\n    pending: 3,\r\n    ok: 4,\r\n    paused: 5,\r\n};\r\nvar evalFunctions = [\r\n    { text: 'IS ABOVE', value: 'gt' },\r\n    { text: 'IS BELOW', value: 'lt' },\r\n    { text: 'IS OUTSIDE RANGE', value: 'outside_range' },\r\n    { text: 'IS WITHIN RANGE', value: 'within_range' },\r\n    { text: 'HAS NO VALUE', value: 'no_value' }\r\n];\r\nvar evalOperators = [\r\n    { text: 'OR', value: 'or' },\r\n    { text: 'AND', value: 'and' },\r\n];\r\nvar reducerTypes = [\r\n    { text: 'avg()', value: 'avg' },\r\n    { text: 'min()', value: 'min' },\r\n    { text: 'max()', value: 'max' },\r\n    { text: 'sum()', value: 'sum' },\r\n    { text: 'count()', value: 'count' },\r\n    { text: 'last()', value: 'last' },\r\n    { text: 'median()', value: 'median' },\r\n    { text: 'diff()', value: 'diff' },\r\n    { text: 'percent_diff()', value: 'percent_diff' },\r\n    { text: 'count_non_null()', value: 'count_non_null' },\r\n];\r\nvar noDataModes = [\r\n    { text: 'Alerting', value: 'alerting' },\r\n    { text: 'No Data', value: 'no_data' },\r\n    { text: 'Keep Last State', value: 'keep_state' },\r\n    { text: 'Ok', value: 'ok' },\r\n];\r\nvar executionErrorModes = [\r\n    { text: 'Alerting', value: 'alerting' },\r\n    { text: 'Keep Last State', value: 'keep_state' },\r\n];\r\nfunction createReducerPart(model) {\r\n    var def = new __WEBPACK_IMPORTED_MODULE_1_app_core_components_query_part_query_part__[\"b\" /* QueryPartDef */]({ type: model.type, defaultParams: [] });\r\n    return new __WEBPACK_IMPORTED_MODULE_1_app_core_components_query_part_query_part__[\"a\" /* QueryPart */](model, def);\r\n}\r\nfunction getStateDisplayModel(state) {\r\n    switch (state) {\r\n        case 'ok': {\r\n            return {\r\n                text: 'OK',\r\n                iconClass: 'icon-gf icon-gf-online',\r\n                stateClass: 'alert-state-ok'\r\n            };\r\n        }\r\n        case 'alerting': {\r\n            return {\r\n                text: 'ALERTING',\r\n                iconClass: 'icon-gf icon-gf-critical',\r\n                stateClass: 'alert-state-critical'\r\n            };\r\n        }\r\n        case 'no_data': {\r\n            return {\r\n                text: 'NO DATA',\r\n                iconClass: \"fa fa-question\",\r\n                stateClass: 'alert-state-warning'\r\n            };\r\n        }\r\n        case 'paused': {\r\n            return {\r\n                text: 'PAUSED',\r\n                iconClass: \"fa fa-pause\",\r\n                stateClass: 'alert-state-paused'\r\n            };\r\n        }\r\n        case 'pending': {\r\n            return {\r\n                text: 'PENDING',\r\n                iconClass: \"fa fa-exclamation\",\r\n                stateClass: 'alert-state-warning'\r\n            };\r\n        }\r\n    }\r\n    throw { message: 'Unknown alert state' };\r\n}\r\nfunction joinEvalMatches(matches, separator) {\r\n    return __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.reduce(matches, function (res, ev) {\r\n        if (ev.metric !== undefined && ev.value !== undefined) {\r\n            res.push(ev.metric + '=' + ev.value);\r\n        }\r\n        // For backwards compatibility . Should be be able to remove this after ~2017-06-01\r\n        if (ev.Metric !== undefined && ev.Value !== undefined) {\r\n            res.push(ev.Metric + '=' + ev.Value);\r\n        }\r\n        return res;\r\n    }, []).join(separator);\r\n}\r\nfunction getAlertAnnotationInfo(ah) {\r\n    // backward compatability, can be removed in grafana 5.x\r\n    // old way stored evalMatches in data property directly,\r\n    // new way stores it in evalMatches property on new data object\r\n    if (__WEBPACK_IMPORTED_MODULE_0_lodash___default.a.isArray(ah.data)) {\r\n        return joinEvalMatches(ah.data, ', ');\r\n    }\r\n    else if (__WEBPACK_IMPORTED_MODULE_0_lodash___default.a.isArray(ah.data.evalMatches)) {\r\n        return joinEvalMatches(ah.data.evalMatches, ', ');\r\n    }\r\n    if (ah.data.error) {\r\n        return \"Error: \" + ah.data.error;\r\n    }\r\n    if (ah.data.noData || ah.data.no_data) {\r\n        return \"No Data\";\r\n    }\r\n    return \"\";\r\n}\r\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\r\n    alertQueryDef: alertQueryDef,\r\n    getStateDisplayModel: getStateDisplayModel,\r\n    conditionTypes: conditionTypes,\r\n    evalFunctions: evalFunctions,\r\n    evalOperators: evalOperators,\r\n    noDataModes: noDataModes,\r\n    executionErrorModes: executionErrorModes,\r\n    reducerTypes: reducerTypes,\r\n    createReducerPart: createReducerPart,\r\n    getAlertAnnotationInfo: getAlertAnnotationInfo,\r\n    alertStateSortScore: alertStateSortScore,\r\n});\r\n\n\n/***/ }),\n\n/***/ 800:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return QueryPartDef; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return QueryPart; });\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = functionRenderer;\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = suffixRenderer;\n/* unused harmony export identityRenderer */\n/* unused harmony export quotedIdentityRenderer */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n///<reference path=\"../../../headers/common.d.ts\" />\r\n\r\nvar QueryPartDef = /** @class */ (function () {\r\n    function QueryPartDef(options) {\r\n        this.type = options.type;\r\n        this.params = options.params;\r\n        this.defaultParams = options.defaultParams;\r\n        this.renderer = options.renderer;\r\n        this.category = options.category;\r\n        this.addStrategy = options.addStrategy;\r\n    }\r\n    return QueryPartDef;\r\n}());\r\n\r\nvar QueryPart = /** @class */ (function () {\r\n    function QueryPart(part, def) {\r\n        this.part = part;\r\n        this.def = def;\r\n        if (!this.def) {\r\n            throw { message: 'Could not find query part ' + part.type };\r\n        }\r\n        part.params = part.params || __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.clone(this.def.defaultParams);\r\n        this.params = part.params;\r\n        this.updateText();\r\n    }\r\n    QueryPart.prototype.render = function (innerExpr) {\r\n        return this.def.renderer(this, innerExpr);\r\n    };\r\n    QueryPart.prototype.hasMultipleParamsInString = function (strValue, index) {\r\n        if (strValue.indexOf(',') === -1) {\r\n            return false;\r\n        }\r\n        return this.def.params[index + 1] && this.def.params[index + 1].optional;\r\n    };\r\n    QueryPart.prototype.updateParam = function (strValue, index) {\r\n        var _this = this;\r\n        // handle optional parameters\r\n        // if string contains ',' and next param is optional, split and update both\r\n        if (this.hasMultipleParamsInString(strValue, index)) {\r\n            __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.each(strValue.split(','), function (partVal, idx) {\r\n                _this.updateParam(partVal.trim(), idx);\r\n            });\r\n            return;\r\n        }\r\n        if (strValue === '' && this.def.params[index].optional) {\r\n            this.params.splice(index, 1);\r\n        }\r\n        else {\r\n            this.params[index] = strValue;\r\n        }\r\n        this.part.params = this.params;\r\n        this.updateText();\r\n    };\r\n    QueryPart.prototype.updateText = function () {\r\n        if (this.params.length === 0) {\r\n            this.text = this.def.type + '()';\r\n            return;\r\n        }\r\n        var text = this.def.type + '(';\r\n        text += this.params.join(', ');\r\n        text += ')';\r\n        this.text = text;\r\n    };\r\n    return QueryPart;\r\n}());\r\n\r\nfunction functionRenderer(part, innerExpr) {\r\n    var str = part.def.type + '(';\r\n    var parameters = __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.map(part.params, function (value, index) {\r\n        var paramType = part.def.params[index];\r\n        if (paramType.type === 'time') {\r\n            if (value === 'auto') {\r\n                value = '$__interval';\r\n            }\r\n        }\r\n        if (paramType.quote === 'single') {\r\n            return \"'\" + value + \"'\";\r\n        }\r\n        else if (paramType.quote === 'double') {\r\n            return '\"' + value + '\"';\r\n        }\r\n        return value;\r\n    });\r\n    if (innerExpr) {\r\n        parameters.unshift(innerExpr);\r\n    }\r\n    return str + parameters.join(', ') + ')';\r\n}\r\nfunction suffixRenderer(part, innerExpr) {\r\n    return innerExpr + ' ' + part.params[0];\r\n}\r\nfunction identityRenderer(part, innerExpr) {\r\n    return part.params[0];\r\n}\r\nfunction quotedIdentityRenderer(part, innerExpr) {\r\n    return '\"' + part.params[0] + '\"';\r\n}\r\n\n\n/***/ }),\n\n/***/ 851:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export AlertListCtrl */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_moment__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_moment__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_app_core_core__ = __webpack_require__(290);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__alert_def__ = __webpack_require__(799);\n///<reference path=\"../../headers/common.d.ts\" />\r\n\r\n\r\n\r\n\r\nvar AlertListCtrl = /** @class */ (function () {\r\n    /** @ngInject */\n    AlertListCtrl.$inject = [\"backendSrv\", \"$location\", \"navModelSrv\"];\r\n    function AlertListCtrl(backendSrv, $location, navModelSrv) {\r\n        this.backendSrv = backendSrv;\r\n        this.$location = $location;\r\n        this.stateFilters = [\r\n            { text: 'All', value: null },\r\n            { text: 'OK', value: 'ok' },\r\n            { text: 'Alerting', value: 'alerting' },\r\n            { text: 'No Data', value: 'no_data' },\r\n            { text: 'Paused', value: 'paused' },\r\n        ];\r\n        this.filters = {\r\n            state: 'ALL'\r\n        };\r\n        this.navModel = navModelSrv.getAlertingNav(0);\r\n        var params = $location.search();\r\n        this.filters.state = params.state || null;\r\n        this.loadAlerts();\r\n    }\r\n    AlertListCtrl.prototype.filtersChanged = function () {\r\n        this.$location.search(this.filters);\r\n    };\r\n    AlertListCtrl.prototype.loadAlerts = function () {\r\n        var _this = this;\r\n        this.backendSrv.get('/api/alerts', this.filters).then(function (result) {\r\n            _this.alerts = __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.map(result, function (alert) {\r\n                alert.stateModel = __WEBPACK_IMPORTED_MODULE_3__alert_def__[\"a\" /* default */].getStateDisplayModel(alert.state);\r\n                alert.newStateDateAgo = __WEBPACK_IMPORTED_MODULE_1_moment___default()(alert.newStateDate).fromNow().replace(\" ago\", \"\");\r\n                if (alert.evalData && alert.evalData.no_data) {\r\n                    alert.no_data = true;\r\n                }\r\n                return alert;\r\n            });\r\n        });\r\n    };\r\n    AlertListCtrl.prototype.pauseAlertRule = function (alertId) {\r\n        var alert = __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.find(this.alerts, { id: alertId });\r\n        var payload = {\r\n            paused: alert.state !== \"paused\"\r\n        };\r\n        this.backendSrv.post(\"/api/alerts/\" + alert.id + \"/pause\", payload).then(function (result) {\r\n            alert.state = result.state;\r\n            alert.stateModel = __WEBPACK_IMPORTED_MODULE_3__alert_def__[\"a\" /* default */].getStateDisplayModel(result.state);\r\n        });\r\n    };\r\n    AlertListCtrl.prototype.openHowTo = function () {\r\n        __WEBPACK_IMPORTED_MODULE_2_app_core_core__[\"appEvents\"].emit('show-modal', {\r\n            src: 'public/app/features/alerting/partials/alert_howto.html',\r\n            modalClass: 'confirm-modal',\r\n            model: {}\r\n        });\r\n    };\r\n    return AlertListCtrl;\r\n}());\r\n\r\n__WEBPACK_IMPORTED_MODULE_2_app_core_core__[\"coreModule\"].controller('AlertListCtrl', AlertListCtrl);\r\n\n\n/***/ }),\n\n/***/ 852:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export AlertNotificationsListCtrl */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_app_core_core__ = __webpack_require__(290);\n///<reference path=\"../../headers/common.d.ts\" />\r\n\r\nvar AlertNotificationsListCtrl = /** @class */ (function () {\r\n    /** @ngInject */\n    AlertNotificationsListCtrl.$inject = [\"backendSrv\", \"navModelSrv\"];\r\n    function AlertNotificationsListCtrl(backendSrv, navModelSrv) {\r\n        this.backendSrv = backendSrv;\r\n        this.loadNotifications();\r\n        this.navModel = navModelSrv.getAlertingNav(1);\r\n    }\r\n    AlertNotificationsListCtrl.prototype.loadNotifications = function () {\r\n        var _this = this;\r\n        this.backendSrv.get(\"/api/alert-notifications\").then(function (result) {\r\n            _this.notifications = result;\r\n        });\r\n    };\r\n    AlertNotificationsListCtrl.prototype.deleteNotification = function (id) {\r\n        var _this = this;\r\n        this.backendSrv.delete(\"/api/alert-notifications/\" + id).then(function () {\r\n            _this.notifications = _this.notifications.filter(function (notification) {\r\n                return notification.id !== id;\r\n            });\r\n        });\r\n    };\r\n    return AlertNotificationsListCtrl;\r\n}());\r\n\r\n__WEBPACK_IMPORTED_MODULE_0_app_core_core__[\"coreModule\"].controller('AlertNotificationsListCtrl', AlertNotificationsListCtrl);\r\n\n\n/***/ }),\n\n/***/ 853:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export AlertNotificationEditCtrl */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_app_core_core__ = __webpack_require__(290);\n///<reference path=\"../../headers/common.d.ts\" />\r\n\r\n\r\nvar AlertNotificationEditCtrl = /** @class */ (function () {\r\n    /** @ngInject */\n    AlertNotificationEditCtrl.$inject = [\"$routeParams\", \"backendSrv\", \"$location\", \"$templateCache\", \"navModelSrv\"];\r\n    function AlertNotificationEditCtrl($routeParams, backendSrv, $location, $templateCache, navModelSrv) {\r\n        var _this = this;\r\n        this.$routeParams = $routeParams;\r\n        this.backendSrv = backendSrv;\r\n        this.$location = $location;\r\n        this.$templateCache = $templateCache;\r\n        this.testSeverity = \"critical\";\r\n        this.defaults = {\r\n            type: 'email',\r\n            settings: {\r\n                httpMethod: 'POST',\r\n                autoResolve: true,\r\n                uploadImage: true,\r\n            },\r\n            isDefault: false\r\n        };\r\n        this.navModel = navModelSrv.getAlertingNav();\r\n        this.backendSrv.get(\"/api/alert-notifiers\").then(function (notifiers) {\r\n            _this.notifiers = notifiers;\r\n            // add option templates\r\n            for (var _i = 0, _a = _this.notifiers; _i < _a.length; _i++) {\r\n                var notifier = _a[_i];\r\n                _this.$templateCache.put(_this.getNotifierTemplateId(notifier.type), notifier.optionsTemplate);\r\n            }\r\n            if (!_this.$routeParams.id) {\r\n                return __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.defaults(_this.model, _this.defaults);\r\n            }\r\n            return _this.backendSrv.get(\"/api/alert-notifications/\" + _this.$routeParams.id).then(function (result) {\r\n                return result;\r\n            });\r\n        }).then(function (model) {\r\n            _this.model = model;\r\n            _this.notifierTemplateId = _this.getNotifierTemplateId(_this.model.type);\r\n        });\r\n    }\r\n    AlertNotificationEditCtrl.prototype.save = function () {\r\n        var _this = this;\r\n        if (!this.theForm.$valid) {\r\n            return;\r\n        }\r\n        if (this.model.id) {\r\n            this.backendSrv.put(\"/api/alert-notifications/\" + this.model.id, this.model).then(function (res) {\r\n                _this.model = res;\r\n                __WEBPACK_IMPORTED_MODULE_1_app_core_core__[\"appEvents\"].emit('alert-success', ['Notification updated', '']);\r\n            });\r\n        }\r\n        else {\r\n            this.backendSrv.post(\"/api/alert-notifications\", this.model).then(function (res) {\r\n                __WEBPACK_IMPORTED_MODULE_1_app_core_core__[\"appEvents\"].emit('alert-success', ['Notification created', '']);\r\n                _this.$location.path('alerting/notifications');\r\n            });\r\n        }\r\n    };\r\n    AlertNotificationEditCtrl.prototype.getNotifierTemplateId = function (type) {\r\n        return \"notifier-options-\" + type;\r\n    };\r\n    AlertNotificationEditCtrl.prototype.typeChanged = function () {\r\n        this.model.settings = {};\r\n        this.notifierTemplateId = this.getNotifierTemplateId(this.model.type);\r\n    };\r\n    AlertNotificationEditCtrl.prototype.testNotification = function () {\r\n        if (!this.theForm.$valid) {\r\n            return;\r\n        }\r\n        var payload = {\r\n            name: this.model.name,\r\n            type: this.model.type,\r\n            settings: this.model.settings,\r\n        };\r\n        this.backendSrv.post(\"/api/alert-notifications/test\", payload)\r\n            .then(function (res) {\r\n            __WEBPACK_IMPORTED_MODULE_1_app_core_core__[\"appEvents\"].emit('alert-success', ['Test notification sent', '']);\r\n        });\r\n    };\r\n    return AlertNotificationEditCtrl;\r\n}());\r\n\r\n__WEBPACK_IMPORTED_MODULE_1_app_core_core__[\"coreModule\"].controller('AlertNotificationEditCtrl', AlertNotificationEditCtrl);\r\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 2.da1bd4ed01ea396d1764.js","///<reference path=\"../../headers/common.d.ts\" />\n\nimport _ from 'lodash';\nimport {\n  QueryPartDef,\n  QueryPart,\n} from 'app/core/components/query_part/query_part';\n\nvar alertQueryDef = new QueryPartDef({\n  type: 'query',\n  params: [\n    {name: \"queryRefId\", type: 'string', dynamicLookup: true},\n    {name: \"from\", type: \"string\", options: ['1s', '10s', '1m', '5m', '10m', '15m', '1h', '24h', '48h']},\n    {name: \"to\", type: \"string\", options: ['now']},\n  ],\n  defaultParams: ['#A', '15m', 'now', 'avg']\n});\n\nvar conditionTypes = [\n  {text: 'Query', value: 'query'},\n];\n\nvar alertStateSortScore = {\n  alerting: 1,\n  no_data: 2,\n  pending: 3,\n  ok: 4,\n  paused: 5,\n};\n\nvar evalFunctions = [\n  {text: 'IS ABOVE', value: 'gt'},\n  {text: 'IS BELOW', value: 'lt'},\n  {text: 'IS OUTSIDE RANGE', value: 'outside_range'},\n  {text: 'IS WITHIN RANGE', value: 'within_range'},\n  {text: 'HAS NO VALUE' , value: 'no_value'}\n];\n\nvar evalOperators = [\n  {text: 'OR', value: 'or'},\n  {text: 'AND', value: 'and'},\n];\n\nvar reducerTypes = [\n  {text: 'avg()', value: 'avg'},\n  {text: 'min()', value: 'min'},\n  {text: 'max()', value: 'max'},\n  {text: 'sum()' , value: 'sum'},\n  {text: 'count()', value: 'count'},\n  {text: 'last()', value: 'last'},\n  {text: 'median()', value: 'median'},\n  {text: 'diff()', value: 'diff'},\n  {text: 'percent_diff()', value: 'percent_diff'},\n  {text: 'count_non_null()', value: 'count_non_null'},\n];\n\nvar noDataModes = [\n  {text: 'Alerting', value: 'alerting'},\n  {text: 'No Data', value: 'no_data'},\n  {text: 'Keep Last State', value: 'keep_state'},\n  {text: 'Ok', value: 'ok'},\n];\n\nvar executionErrorModes = [\n  {text: 'Alerting', value: 'alerting'},\n  {text: 'Keep Last State', value: 'keep_state'},\n];\n\nfunction createReducerPart(model) {\n  var def = new QueryPartDef({type: model.type, defaultParams: []});\n  return new QueryPart(model, def);\n}\n\nfunction getStateDisplayModel(state) {\n  switch (state) {\n    case 'ok': {\n      return {\n        text: 'OK',\n        iconClass: 'icon-gf icon-gf-online',\n        stateClass: 'alert-state-ok'\n      };\n    }\n    case 'alerting': {\n      return {\n        text: 'ALERTING',\n        iconClass: 'icon-gf icon-gf-critical',\n        stateClass: 'alert-state-critical'\n      };\n    }\n    case 'no_data': {\n      return {\n        text: 'NO DATA',\n        iconClass: \"fa fa-question\",\n        stateClass: 'alert-state-warning'\n      };\n    }\n    case 'paused': {\n      return {\n        text: 'PAUSED',\n        iconClass: \"fa fa-pause\",\n        stateClass: 'alert-state-paused'\n      };\n    }\n    case 'pending': {\n      return {\n        text: 'PENDING',\n        iconClass: \"fa fa-exclamation\",\n        stateClass: 'alert-state-warning'\n      };\n    }\n  }\n\n  throw {message: 'Unknown alert state'};\n}\n\nfunction joinEvalMatches(matches, separator: string) {\n  return _.reduce(matches, (res, ev)=> {\n    if (ev.metric !== undefined && ev.value !== undefined) {\n      res.push(ev.metric + '=' + ev.value);\n    }\n\n    // For backwards compatibility . Should be be able to remove this after ~2017-06-01\n    if (ev.Metric !== undefined && ev.Value !== undefined) {\n      res.push(ev.Metric + '=' + ev.Value);\n    }\n\n    return res;\n  }, []).join(separator);\n}\n\nfunction getAlertAnnotationInfo(ah) {\n  // backward compatability, can be removed in grafana 5.x\n  // old way stored evalMatches in data property directly,\n  // new way stores it in evalMatches property on new data object\n\n  if (_.isArray(ah.data)) {\n    return joinEvalMatches(ah.data, ', ');\n  } else if (_.isArray(ah.data.evalMatches)) {\n    return joinEvalMatches(ah.data.evalMatches, ', ');\n  }\n\n  if (ah.data.error) {\n    return \"Error: \" + ah.data.error;\n  }\n\n  if (ah.data.noData || ah.data.no_data) {\n    return \"No Data\";\n  }\n\n  return \"\";\n}\n\nexport default {\n  alertQueryDef: alertQueryDef,\n  getStateDisplayModel: getStateDisplayModel,\n  conditionTypes: conditionTypes,\n  evalFunctions: evalFunctions,\n  evalOperators: evalOperators,\n  noDataModes: noDataModes,\n  executionErrorModes: executionErrorModes,\n  reducerTypes: reducerTypes,\n  createReducerPart: createReducerPart,\n  getAlertAnnotationInfo: getAlertAnnotationInfo,\n  alertStateSortScore: alertStateSortScore,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./public/app/features/alerting/alert_def.ts","///<reference path=\"../../../headers/common.d.ts\" />\n\nimport _ from 'lodash';\n\nexport class QueryPartDef {\n  type: string;\n  params: any[];\n  defaultParams: any[];\n  renderer: any;\n  category: any;\n  addStrategy: any;\n\n  constructor(options: any) {\n    this.type = options.type;\n    this.params = options.params;\n    this.defaultParams = options.defaultParams;\n    this.renderer = options.renderer;\n    this.category = options.category;\n    this.addStrategy = options.addStrategy;\n  }\n}\n\nexport class QueryPart {\n  part: any;\n  def: QueryPartDef;\n  params: any[];\n  text: string;\n\n  constructor(part: any, def: any) {\n    this.part = part;\n    this.def = def;\n    if (!this.def) {\n      throw {message: 'Could not find query part ' + part.type};\n    }\n\n    part.params = part.params || _.clone(this.def.defaultParams);\n    this.params = part.params;\n    this.updateText();\n  }\n\n  render(innerExpr: string) {\n    return this.def.renderer(this, innerExpr);\n  }\n\n  hasMultipleParamsInString (strValue, index) {\n    if (strValue.indexOf(',') === -1) {\n      return false;\n    }\n\n    return this.def.params[index + 1] && this.def.params[index + 1].optional;\n  }\n\n  updateParam (strValue, index) {\n    // handle optional parameters\n    // if string contains ',' and next param is optional, split and update both\n    if (this.hasMultipleParamsInString(strValue, index)) {\n      _.each(strValue.split(','), (partVal, idx) => {\n        this.updateParam(partVal.trim(), idx);\n      });\n      return;\n    }\n\n    if (strValue === '' && this.def.params[index].optional) {\n      this.params.splice(index, 1);\n    } else {\n      this.params[index] = strValue;\n    }\n\n    this.part.params = this.params;\n    this.updateText();\n  }\n\n  updateText() {\n    if (this.params.length === 0) {\n      this.text = this.def.type + '()';\n      return;\n    }\n\n    var text = this.def.type + '(';\n    text += this.params.join(', ');\n    text += ')';\n    this.text = text;\n  }\n}\n\nexport function functionRenderer(part, innerExpr) {\n  var str = part.def.type + '(';\n  var parameters = _.map(part.params, (value, index) => {\n    var paramType = part.def.params[index];\n    if (paramType.type === 'time') {\n      if (value === 'auto') {\n        value = '$__interval';\n      }\n    }\n    if (paramType.quote === 'single') {\n      return \"'\" + value + \"'\";\n    } else if (paramType.quote === 'double') {\n      return '\"' + value + '\"';\n    }\n\n    return value;\n  });\n\n  if (innerExpr) {\n    parameters.unshift(innerExpr);\n  }\n  return str + parameters.join(', ') + ')';\n}\n\n\nexport function suffixRenderer(part, innerExpr) {\n  return innerExpr + ' ' + part.params[0];\n}\n\nexport function identityRenderer(part, innerExpr) {\n  return part.params[0];\n}\n\nexport function quotedIdentityRenderer(part, innerExpr) {\n  return '\"' + part.params[0] + '\"';\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./public/app/core/components/query_part/query_part.ts","///<reference path=\"../../headers/common.d.ts\" />\n\nimport _ from 'lodash';\nimport moment from 'moment';\n\nimport {coreModule, appEvents} from  'app/core/core';\nimport alertDef from './alert_def';\n\nexport class AlertListCtrl {\n  alerts: any;\n  stateFilters = [\n    {text: 'All', value: null},\n    {text: 'OK', value: 'ok'},\n    {text: 'Alerting', value: 'alerting'},\n    {text: 'No Data', value: 'no_data'},\n    {text: 'Paused', value: 'paused'},\n  ];\n  filters = {\n    state: 'ALL'\n  };\n  navModel: any;\n\n  /** @ngInject */\n  constructor(private backendSrv, private $location, navModelSrv) {\n    this.navModel = navModelSrv.getAlertingNav(0);\n\n    var params = $location.search();\n    this.filters.state = params.state || null;\n    this.loadAlerts();\n  }\n\n  filtersChanged() {\n    this.$location.search(this.filters);\n  }\n\n  loadAlerts() {\n    this.backendSrv.get('/api/alerts', this.filters).then(result => {\n      this.alerts = _.map(result, alert => {\n        alert.stateModel = alertDef.getStateDisplayModel(alert.state);\n        alert.newStateDateAgo = moment(alert.newStateDate).fromNow().replace(\" ago\", \"\");\n        if (alert.evalData && alert.evalData.no_data) {\n          alert.no_data = true;\n        }\n        return alert;\n      });\n    });\n  }\n\n  pauseAlertRule(alertId: any) {\n    var alert = _.find(this.alerts, {id: alertId});\n\n    var payload = {\n      paused: alert.state !== \"paused\"\n    };\n\n    this.backendSrv.post(`/api/alerts/${alert.id}/pause`, payload).then(result => {\n      alert.state = result.state;\n      alert.stateModel = alertDef.getStateDisplayModel(result.state);\n    });\n  }\n\n  openHowTo() {\n    appEvents.emit('show-modal', {\n      src: 'public/app/features/alerting/partials/alert_howto.html',\n      modalClass: 'confirm-modal',\n      model: {}\n    });\n  }\n}\n\ncoreModule.controller('AlertListCtrl', AlertListCtrl);\n\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./public/app/features/alerting/alert_list_ctrl.ts","///<reference path=\"../../headers/common.d.ts\" />\n\nimport {coreModule} from  'app/core/core';\n\nexport class AlertNotificationsListCtrl {\n  notifications: any;\n  navModel: any;\n\n  /** @ngInject */\n  constructor(private backendSrv, navModelSrv) {\n    this.loadNotifications();\n    this.navModel = navModelSrv.getAlertingNav(1);\n  }\n\n  loadNotifications() {\n    this.backendSrv.get(`/api/alert-notifications`).then(result => {\n      this.notifications = result;\n    });\n  }\n\n  deleteNotification(id) {\n    this.backendSrv.delete(`/api/alert-notifications/${id}`).then(() => {\n      this.notifications = this.notifications.filter(notification => {\n        return notification.id !== id;\n      });\n    });\n  }\n}\n\ncoreModule.controller('AlertNotificationsListCtrl', AlertNotificationsListCtrl);\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./public/app/features/alerting/notifications_list_ctrl.ts","///<reference path=\"../../headers/common.d.ts\" />\n\nimport _ from 'lodash';\nimport {appEvents, coreModule} from 'app/core/core';\n\nexport class AlertNotificationEditCtrl {\n  theForm: any;\n  navModel: any;\n  testSeverity = \"critical\";\n  notifiers: any;\n  notifierTemplateId: string;\n\n  model: any;\n  defaults: any = {\n    type: 'email',\n    settings: {\n      httpMethod: 'POST',\n      autoResolve: true,\n      uploadImage: true,\n    },\n    isDefault: false\n  };\n\n  /** @ngInject */\n  constructor(private $routeParams, private backendSrv, private $location, private $templateCache, navModelSrv) {\n    this.navModel = navModelSrv.getAlertingNav();\n\n    this.backendSrv.get(`/api/alert-notifiers`).then(notifiers => {\n      this.notifiers = notifiers;\n\n      // add option templates\n      for (let notifier of this.notifiers) {\n        this.$templateCache.put(this.getNotifierTemplateId(notifier.type), notifier.optionsTemplate);\n      }\n\n      if (!this.$routeParams.id) {\n        return _.defaults(this.model, this.defaults);\n      }\n\n      return this.backendSrv.get(`/api/alert-notifications/${this.$routeParams.id}`).then(result => {\n        return result;\n      });\n    }).then(model => {\n      this.model = model;\n      this.notifierTemplateId = this.getNotifierTemplateId(this.model.type);\n    });\n  }\n\n  save() {\n    if (!this.theForm.$valid) {\n      return;\n    }\n\n    if (this.model.id) {\n      this.backendSrv.put(`/api/alert-notifications/${this.model.id}`, this.model).then(res => {\n        this.model = res;\n        appEvents.emit('alert-success', ['Notification updated', '']);\n      });\n    } else {\n      this.backendSrv.post(`/api/alert-notifications`, this.model).then(res => {\n        appEvents.emit('alert-success', ['Notification created', '']);\n        this.$location.path('alerting/notifications');\n      });\n    }\n  }\n\n  getNotifierTemplateId(type) {\n    return `notifier-options-${type}`;\n  }\n\n  typeChanged() {\n    this.model.settings = {};\n    this.notifierTemplateId = this.getNotifierTemplateId(this.model.type);\n  }\n\n  testNotification() {\n    if (!this.theForm.$valid) {\n      return;\n    }\n\n    var payload = {\n      name: this.model.name,\n      type: this.model.type,\n      settings: this.model.settings,\n    };\n\n    this.backendSrv.post(`/api/alert-notifications/test`, payload)\n    .then(res => {\n      appEvents.emit('alert-success', ['Test notification sent', '']);\n    });\n  }\n}\n\ncoreModule.controller('AlertNotificationEditCtrl', AlertNotificationEditCtrl);\n\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./public/app/features/alerting/notification_edit_ctrl.ts"],"sourceRoot":""}